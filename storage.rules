rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    // Los archivos de los m칩dulos se guardan en una ruta predecible
    match /cursos/{cursoId}/modulos/{fileName} {
      // Solo un usuario autenticado puede escribir (subir)
      // Adem치s, validamos que sea una imagen y que no supere los 5MB
      allow write: if request.auth!= null
                   && request.resource.size < 5 * 1024 * 1024
                   && request.resource.contentType.matches('image/.*');
      
      // Cualquiera puede leer las im치genes de los m칩dulos (necesario para mostrarlas)
      allow read;
    }
  }
}